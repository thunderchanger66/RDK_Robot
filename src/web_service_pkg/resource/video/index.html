<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ROS视频流</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- 左侧面板 -->
    <div class="left-panel">
        <div class="header">
            <h1>ROS 视频监控系统</h1>
        </div>
        <!-- 视频区域 -->
        <div class="elemento-derecha">
            <div id="media">
                <div class="title">视频流 /image</div>
                <video id="video" autoplay="true" playsinline="true"></video>
            </div>
        </div>
        
         <div class="tool-selection">
            <h3>选择工具</h3>
                <select id="toolSelect">
                    <option value="">-- 选择工具 --</option>
                    <option value="螺丝刀">螺丝刀</option>
                    <option value="扳手">扳手</option>
                    <option value="钳子">钳子</option>
                    <option value="锤子">锤子</option>
                    <option value="卷尺">卷尺</option>
                    <option value="其他">其他</option>
                </select>
            <button onclick="manualToolSelection(document.getElementById('toolSelect').value)">
            确认选择
            </button>
        </div>
    
        <!-- 控制按钮区域 -->
        <div class="ros-controls">
            <!-- 底盘控制按钮 -->
            <div>
                <h3>底盘控制</h3>
                <button onmousedown="moveForward()" onmouseup="stopMovement()">前进</button>
                <button onmousedown="moveBackward()" onmouseup="stopMovement()">后退</button>
                <button onmousedown="moveLeft()" onmouseup="stopMovement()">左转</button>
                <button onmousedown="moveRight()" onmouseup="stopMovement()">右转</button>
            </div>

        </div>
    </div>
    <!-- 右侧面板 (预留位置) -->
    <div class="right-panel">
        <h1>工具管理系统</h1>
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="输入姓名或工具查询">
            <button onclick="searchRecords()">查询</button>
        </div>
        <div id="recordsTable">
        <table>
            <thead>
                <tr>
                    <th>日期</th>
                    <th>时间</th>
                    <th>姓名</th>
                    <th>工具</th>
                </tr>
            </thead>
            <tbody id="recordsBody">
            </tbody>
        </table>
        </div>
    </div>

    <!-- WebRTC必需的隐藏元素 -->
    <div style="display: none;">
        <span id="ice-gathering-state"></span>
        <span id="ice-connection-state"></span>
        <span id="signaling-state"></span>
        <pre id="data-channel"></pre>
        <select id="datachannel-parameters">
            <option value='{"ordered": true}'>Ordered, reliable</option>
        </select>
        <select id="video-resolution">
            <option value="1280x720">1280x720</option>
        </select>
    </div>

    <script src="https://unpkg.com/roslib@1.3.0/build/roslib.js"></script>
    <script src="js/RosConnection.js"></script>
    <script src="js/MovementControl.js"></script>
    <script src="js/AttendanceSystem.js"></script>
    <script src="js/client.js"></script>
    <script>
        window.onload = function() {
            start();
        }
    </script>
</body>
</html>